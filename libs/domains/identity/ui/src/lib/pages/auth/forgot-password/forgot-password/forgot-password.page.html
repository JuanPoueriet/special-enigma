<app-auth-layout>
  <div class="w-full animate-fade-in-up">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-2xl font-bold text-text-primary mb-2">
        {{ 'FORGOT_PASSWORD.TITLE' | translate }}
      </h1>
      <p class="text-text-secondary text-sm">
        {{ 'FORGOT_PASSWORD.SUBTITLE' | translate }}
      </p>
    </div>

    <!-- Success Message -->
    @if (successMessage()) {
      <div class="mb-6 p-4 rounded-xl bg-success/10 border border-success/20 text-success text-center animate-fade-in-up">
        <div class="flex flex-col items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
          <p class="text-sm font-medium">{{ 'FORGOT_PASSWORD.SUCCESS' | translate }}</p>
        </div>
      </div>
    }

    <!-- Form -->
    @if (!successMessage()) {
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <app-auth-input
          formControlName="email"
          type="email"
          [label]="'LOGIN.EMAIL_LABEL' | translate"
          [placeholder]="'LOGIN.EMAIL_PLACEHOLDER' | translate"
          [required]="true"
          [hasIcon]="true"
          [errorMessage]="getErrorMessage('email')">
          <svg icon xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
        </app-auth-input>
        @if (errorMessage()) {
          <div class="p-3 rounded-lg bg-error/10 border border-error/20 text-error text-sm flex items-center gap-2 animate-fade-in-up">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
            <span>{{ errorMessage() | translate }}</span>
          </div>
        }
        <app-auth-button
          type="submit"
          variant="primary"
          [loading]="isLoading()"
          [disabled]="forgotPasswordForm.invalid">
          {{ (isLoading() ? 'FORGOT_PASSWORD.SENDING' : 'FORGOT_PASSWORD.SUBMIT_BUTTON') | translate }}
        </app-auth-button>
      </form>
    }

    <!-- ReCAPTCHA Legal Text -->
    <p class="text-[10px] text-text-tertiary text-center mt-6 leading-tight">
      This site is protected by reCAPTCHA and the Google
      <a href="https://policies.google.com/privacy" target="_blank" class="hover:text-text-secondary underline">Privacy Policy</a> and
      <a href="https://policies.google.com/terms" target="_blank" class="hover:text-text-secondary underline">Terms of Service</a> apply.
    </p>

    <!-- Footer Actions -->
    <div class="mt-8 text-center">
      <a [routerLink]="['/', languageService.currentLang(), 'auth', 'login']"
        class="inline-flex items-center gap-2 text-sm font-medium text-text-secondary hover:text-primary transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        {{ 'FORGOT_PASSWORD.BACK_TO_LOGIN' | translate }}
      </a>
    </div>
  </div>
</app-auth-layout>
